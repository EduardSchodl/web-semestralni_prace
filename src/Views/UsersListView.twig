{% extends "BaseView.twig" %}

{% block title %} {{ title }} {% endblock %}

{% block content %}
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">Role</th>
            <th scope="col">Profile</th>
        </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr>
                    <th scope="row">{{ loop.index }}</th>
                    <td>{{ user["first_name"] }} {{ user["last_name"] }}</td>
                    <td>{{ user["email"] }}</td>
                    {% if app.user.role_id >= user["role_id"] %}
                        <td>{{ user["role_name"] }}</td>
                    {% else %}
                        <td>
                            <select name="roles" id="roles">
                                {% for role in roles %}
                                    <option {% if user["role_id"] == role.id_role %} selected {% endif %} value="{{ role.name }}">{{ role.name }}</option>
                                {% endfor %}
                            </select>
                        </td>
                    {% endif %}
                    {% if app.user.id_user == user.id_user %}
                        <td><a class="btn btn-primary" href="profile">Profile</a></td>
                    {% else %}
                        <td><a class="btn btn-primary" href="users/{{ user["id_user"] }}">Profile</a></td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}